language: ruby

services:
  - docker

addons:
  apt:
    packages:
    - curl
    - git
    - shellcheck
    - python-pip

rvm:
  - ruby

env:
  matrix:
    - SUITE="changelog:main"
    - SUITE="integration:centos"
    - SUITE="integration:debian"
    - SUITE="integration:ubuntu"
    - SUITE="rubocop:main"
    - SUITE="shellcheck:main"

sudo: true
dist: trusty
bundler_args: --with=docker --without vagrant windows

before_install:
  - pip install --user -r test-requirements.txt

script:
  # Enter the main test loop
  - bundle exec rake travis:main

after_script:
  # Enter the cleanup loop
  - bundle exec rake travis:cleanup
